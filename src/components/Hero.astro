<section id="home" class="hero">
    <div class="hero-bg"></div>
    <div class="container">
        <div class="hero-content">
            <div class="hero-text fade-in">
                <div class="hero-badge">
                    <i class="fas fa-circle-check"></i> Available for full-time opportunities
                </div>
                <h1 class="hero-title">
                    <span class="line-1 slide-in-left initial-load">Full Stack Developer &</span>
                    <br>
                    <span class="line-2 slide-in-left initial-load">Integration Engineer</span>
                </h1>
                <p>Born and raised in Gangtok, Sikkim, India. Expertise in .NET, Angular, and complex third-party
                    integrations.</p>

                <div class="cta-buttons">
                    <a href="#contact" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Get In Touch
                    </a>
                    <a href="#projects" class="btn btn-secondary">
                        <i class="fas fa-code"></i> View Projects
                    </a>
                </div>
            </div>

            <div class="hero-visual fade-in">
                <div class="floating-card">
                    <div class="card-header">
                        <div class="card-title">Current Work</div>
                        <div class="card-stats">
                            <div class="stat">
                                <div class="stat-value">PROJECT PRANALI</div>
                                <div class="stat-label">State IFMIS Website</div>
                            </div>
                        </div>
                    </div>
                    <p>Currently developing and maintaining Project PRANALI (State IFMIS) - managing payroll for
                        entire Sikkim Government workforce and actively developing solutions for a secure and robust website.</p>

                    <div class="tech-stack">
                        <span class="tech-tag"><i class="fab fa-angular"></i> Angular</span>
                        <span class="tech-tag"><i class="fas fa-code"></i> .NET</span>
                        <span class="tech-tag"><i class="fas fa-database"></i> MySQL</span>
                        <span class="tech-tag"><i class="fab fa-python"></i> Python</span>
                        <span class="tech-tag"><i class="fas fa-bolt"></i> Kafka</span>
                    </div>
                </div>

                <div class="stray-cat">
                    <div class="cat-leg back-left"></div>
                    <div class="cat-leg back-right"></div>
                    <div class="cat-leg front-left"></div>
                    <div class="cat-leg front-right"></div>
                    <div class="cat-tail"></div>
                    <div class="cat-body"></div>
                    <div class="cat-head">
                        <div class="cat-ear left"></div>
                        <div class="cat-ear right"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // FIX: We cast elements 'as HTMLElement' so TypeScript knows they have style properties
    const line1 = document.querySelector('.line-1') as HTMLElement;
    const line2 = document.querySelector('.line-2') as HTMLElement;
    
    setTimeout(() => {
        if(line1) line1.classList.remove('initial-load');
        if(line2) line2.classList.remove('initial-load');
    }, 100); 

    window.addEventListener('scroll', () => {
        const scrollY = window.scrollY;
        if (performance.now() < 1500) return;

        if (scrollY < window.innerHeight && line1 && line2) {
            const speed = 0.5;
            const xMove = -scrollY * speed;
            const opacity = 1 - (scrollY / 500);
            
            if (opacity >= 0) {
                line1.style.transform = `translateX(${xMove}px)`;
                line1.style.opacity = opacity.toString();
                line2.style.transform = `translateX(${xMove * 1.2}px)`;
                line2.style.opacity = opacity.toString();
            }
        }
    });

    // --- High-Performance Cat Interaction ---
    const strayCat = document.querySelector('.stray-cat') as HTMLElement;
    const heroVisual = document.querySelector('.hero-visual') as HTMLElement;

    if (strayCat && heroVisual) {
        let catIsRunning = true;
        let catDirection = 1;

        heroVisual.addEventListener('click', function (e) {
            const target = e.target as HTMLElement;
            // Prevent interaction if clicking the card
            if (!target.closest('.floating-card')) {
                const rect = this.getBoundingClientRect();
                const x = e.clientX - rect.left - 30; // Center offset
                const y = e.clientY - rect.top - 20;

                strayCat.style.animationPlayState = 'paused';
                catIsRunning = false;

                const currentX = parseFloat(getComputedStyle(strayCat).left);
                catDirection = x > currentX ? 1 : -1;
                
                // Flip cat based on direction
                strayCat.style.transform = `scaleX(${catDirection})`;

                // Fast sprint to location
                strayCat.style.transition = 'left 0.6s ease-out, top 0.6s ease-out';
                strayCat.style.left = x + 'px';
                strayCat.style.top = y + 'px';

                createPawPrints(currentX, parseFloat(getComputedStyle(strayCat).top), x, y, heroVisual);

                // Resume running after arriving
                setTimeout(() => {
                    strayCat.style.transition = '';
                    setTimeout(() => {
                        strayCat.style.animationPlayState = 'running';
                        catIsRunning = true;
                        // Keep direction but resume global animation
                        strayCat.style.transform = ''; 
                    }, 500);
                }, 600);
            }
        });

        // Hover: Freeze and Look
        strayCat.addEventListener('mouseenter', () => {
            if (catIsRunning) {
                strayCat.style.animationPlayState = 'paused';
                const head = strayCat.querySelector('.cat-head') as HTMLElement;
                if(head) head.style.transform = 'rotate(15deg) translateY(-2px)';
            }
        });

        strayCat.addEventListener('mouseleave', () => {
            strayCat.style.animationPlayState = 'running';
            const head = strayCat.querySelector('.cat-head') as HTMLElement;
            if(head) head.style.transform = '';
        });
    }

    function createPawPrints(startX: number, startY: number, endX: number, endY: number, container: HTMLElement) {
        const distance = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
        const steps = Math.floor(distance / 30); 

        for (let i = 0; i < steps; i++) {
            setTimeout(() => {
                const paw = document.createElement('div');
                paw.className = 'cat-paw-print';
                const offsetX = (Math.random() - 0.5) * 6;
                const offsetY = (Math.random() - 0.5) * 4;

                paw.style.cssText = `
                    position: absolute;
                    width: 6px;
                    height: 6px;
                    background: rgba(37, 99, 235, 0.2);
                    border-radius: 50%;
                    left: ${startX + (endX - startX) * (i / steps) + offsetX + 30}px;
                    top: ${startY + (endY - startY) * (i / steps) + offsetY + 35}px;
                    z-index: 1;
                    animation: fadePawPrint 2s forwards;
                `;
                container.appendChild(paw);
                setTimeout(() => paw.remove(), 2000);
            }, i * 40);
        }
    }

    if (!document.getElementById('paw-style')) {
        const pawStyle = document.createElement('style');
        pawStyle.id = 'paw-style';
        pawStyle.textContent = `
            @keyframes fadePawPrint {
                0% { opacity: 0; transform: scale(0.5); }
                30% { opacity: 0.6; transform: scale(1.2); }
                100% { opacity: 0; transform: scale(0.5); }
            }
        `;
        document.head.appendChild(pawStyle);
    }
</script>

<style>
    /* HERO TEXT STYLES */
    .hero-title { font-size: 3.5rem; line-height: 1.1; margin-bottom: 20px; }
    .slide-in-left { display: inline-block; opacity: 1; transform: translateX(0); filter: blur(0); transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1), opacity 1s ease, filter 1s ease; }
    .slide-in-left.initial-load { opacity: 0; transform: translateX(-50px); filter: blur(10px); }
    .line-1 { color: #e2e8f0; font-weight: 600; }
    .line-2 { background: linear-gradient(to right, var(--primary, #2563eb), var(--accent, #7c3aed)); -webkit-background-clip: text; background-clip: text; color: transparent; font-weight: 700; transition-delay: 0.2s; }

    /* === CAT CSS === */
    .stray-cat {
        position: absolute;
        width: 60px;
        height: 35px;
        top: 20px;
        left: 20px;
        z-index: 3;
        animation: strayCatRun 10s linear infinite, catGallop 0.22s infinite alternate;
        cursor: pointer;
        transform-origin: center bottom;
    }

    .stray-cat div { background: #0f172a; position: absolute; }

    .cat-body {
        width: 100%; height: 100%; border-radius: 20px;
        top: 0; left: 0; z-index: 10;
        transform: rotate(-1deg);
        animation: bodyStretch 0.22s infinite alternate;
    }

    .cat-head {
        width: 26px; height: 26px; border-radius: 45%;
        top: -8px; right: -8px; z-index: 12;
        transition: transform 0.2s ease;
    }

    .cat-ear {
        width: 0; height: 0;
        border-left: 5px solid transparent; border-right: 5px solid transparent;
        border-bottom: 12px solid #0f172a;
        background: transparent !important; position: absolute; top: -8px;
    }
    .cat-ear.left { left: 2px; transform: rotate(-20deg); }
    .cat-ear.right { right: 2px; transform: rotate(20deg); }

    .cat-tail {
        width: 45px; height: 5px; border-radius: 3px;
        transform-origin: 100% 50%; top: 6px; left: -32px;
        animation: tailWhip 0.44s ease-in-out infinite alternate;
        z-index: 5;
    }

    .cat-leg {
        width: 7px; height: 22px; border-radius: 4px;
        transform-origin: top center; z-index: 5; top: 18px; 
    }

    .front-right { right: 8px; animation: runCycle 0.44s infinite linear; }
    .front-left  { right: 8px; animation: runCycle 0.44s infinite linear 0.22s; z-index: 2; opacity: 0.7; }
    .back-right  { left: 8px; animation: runCycle 0.44s infinite linear 0.11s; }
    .back-left   { left: 8px; animation: runCycle 0.44s infinite linear 0.33s; z-index: 2; opacity: 0.7; }

    @keyframes bodyStretch { 0% { transform: scaleX(1) rotate(-1deg); } 100% { transform: scaleX(1.05) rotate(0deg); } }
    @keyframes runCycle { 0% { transform: rotate(35deg) translateY(-3px); } 25% { transform: rotate(0deg) translateY(0); } 50% { transform: rotate(-45deg) translateY(-3px); } 75% { transform: rotate(0deg) translateY(0); } 100% { transform: rotate(35deg) translateY(-3px); } }
    @keyframes tailWhip { 0% { transform: rotate(-5deg); } 100% { transform: rotate(10deg); } }
    @keyframes catGallop { 0% { margin-top: 0; } 100% { margin-top: 3px; } }
    @keyframes strayCatRun { 0% { left: -10%; transform: scaleX(1); } 45% { left: 40%; transform: scaleX(1); } 48% { left: 40%; transform: scaleX(-1); } 95% { left: -10%; transform: scaleX(-1); } 100% { left: -10%; transform: scaleX(1); } }

    @media (max-width: 768px) {
        .stray-cat { display: none; }
        .hero-title { font-size: 2.2rem; }
    }
</style>